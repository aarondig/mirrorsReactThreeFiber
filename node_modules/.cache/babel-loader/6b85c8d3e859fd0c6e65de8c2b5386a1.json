{"ast":null,"code":"import _slicedToArray from \"/Users/Aaron/Desktop/mirrorsReactThreeFiber/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";\nimport _extends from '@babel/runtime/helpers/esm/extends';\nimport _objectWithoutPropertiesLoose from '@babel/runtime/helpers/esm/objectWithoutPropertiesLoose';\nimport { forwardRef, useRef, useMemo, createElement } from 'react';\nimport { useThree, useFrame } from 'react-three-fiber';\nimport { WebGLRenderTarget, PlaneBufferGeometry, Mesh, MeshDepthMaterial, ShaderMaterial } from 'three';\nimport { HorizontalBlurShader } from 'three/examples/jsm/shaders/HorizontalBlurShader';\nimport { VerticalBlurShader } from 'three/examples/jsm/shaders/VerticalBlurShader';\nvar ContactShadows = /*#__PURE__*/forwardRef(function (_ref, ref) {\n  var _ref$opacity = _ref.opacity,\n    opacity = _ref$opacity === void 0 ? 1 : _ref$opacity,\n    _ref$width = _ref.width,\n    width = _ref$width === void 0 ? 1 : _ref$width,\n    _ref$height = _ref.height,\n    height = _ref$height === void 0 ? 1 : _ref$height,\n    _ref$blur = _ref.blur,\n    blur = _ref$blur === void 0 ? 1 : _ref$blur,\n    _ref$far = _ref.far,\n    far = _ref$far === void 0 ? 10 : _ref$far,\n    _ref$resolution = _ref.resolution,\n    resolution = _ref$resolution === void 0 ? 256 : _ref$resolution,\n    props = _objectWithoutPropertiesLoose(_ref, [\"opacity\", \"width\", \"height\", \"blur\", \"far\", \"resolution\"]);\n  var _useThree = useThree(),\n    scene = _useThree.scene,\n    gl = _useThree.gl;\n  var shadowCamera = useRef();\n  var _useMemo = useMemo(function () {\n      var renderTarget = new WebGLRenderTarget(resolution, resolution);\n      var renderTargetBlur = new WebGLRenderTarget(resolution, resolution);\n      renderTargetBlur.texture.generateMipmaps = renderTarget.texture.generateMipmaps = false;\n      var planeGeometry = new PlaneBufferGeometry(width, height).rotateX(Math.PI / 2);\n      var blurPlane = new Mesh(planeGeometry);\n      var depthMaterial = new MeshDepthMaterial();\n      depthMaterial.depthTest = depthMaterial.depthWrite = false;\n      depthMaterial.onBeforeCompile = function (shader) {\n        return shader.fragmentShader = shader.fragmentShader.replace('1.0 - fragCoordZ ), opacity );', '0.0 ), ( 1.0 - fragCoordZ ) * 1.0 );');\n      };\n      var horizontalBlurMaterial = new ShaderMaterial(HorizontalBlurShader);\n      var verticalBlurMaterial = new ShaderMaterial(VerticalBlurShader);\n      verticalBlurMaterial.depthTest = horizontalBlurMaterial.depthTest = false;\n      return [renderTarget, planeGeometry, depthMaterial, blurPlane, horizontalBlurMaterial, verticalBlurMaterial, renderTargetBlur];\n    }, [resolution, width, height]),\n    _useMemo2 = _slicedToArray(_useMemo, 7),\n    renderTarget = _useMemo2[0],\n    planeGeometry = _useMemo2[1],\n    depthMaterial = _useMemo2[2],\n    blurPlane = _useMemo2[3],\n    horizontalBlurMaterial = _useMemo2[4],\n    verticalBlurMaterial = _useMemo2[5],\n    renderTargetBlur = _useMemo2[6];\n  useFrame(function () {\n    if (shadowCamera.current) {\n      var initialBackground = scene.background;\n      scene.background = null;\n      scene.overrideMaterial = depthMaterial;\n      gl.setRenderTarget(renderTarget);\n      gl.render(scene, shadowCamera.current);\n      scene.overrideMaterial = null;\n      blurPlane.material = horizontalBlurMaterial;\n      blurPlane.material.uniforms.tDiffuse.value = renderTarget.texture;\n      horizontalBlurMaterial.uniforms.h.value = blur / 256;\n      gl.setRenderTarget(renderTargetBlur);\n      gl.render(blurPlane, shadowCamera.current);\n      blurPlane.material = verticalBlurMaterial;\n      blurPlane.material.uniforms.tDiffuse.value = renderTargetBlur.texture;\n      verticalBlurMaterial.uniforms.v.value = blur / 256;\n      gl.setRenderTarget(renderTarget);\n      gl.render(blurPlane, shadowCamera.current);\n      gl.setRenderTarget(null);\n      scene.background = initialBackground;\n    }\n  });\n  return /*#__PURE__*/createElement(\"group\", _extends({}, props, {\n    ref: ref\n  }), /*#__PURE__*/createElement(\"mesh\", {\n    geometry: planeGeometry,\n    scale: [1, -1, 1],\n    rotation: [-Math.PI / 2, 0, 0]\n  }, /*#__PURE__*/createElement(\"meshBasicMaterial\", {\n    map: renderTarget.texture,\n    transparent: true,\n    opacity: opacity\n  })), /*#__PURE__*/createElement(\"orthographicCamera\", {\n    ref: shadowCamera,\n    args: [-width / 2, width / 2, height / 2, -height / 2, 0, far]\n  }));\n});\nexport { ContactShadows };","map":{"version":3,"names":["_extends","_objectWithoutPropertiesLoose","forwardRef","useRef","useMemo","createElement","useThree","useFrame","WebGLRenderTarget","PlaneBufferGeometry","Mesh","MeshDepthMaterial","ShaderMaterial","HorizontalBlurShader","VerticalBlurShader","ContactShadows","_ref","ref","_ref$opacity","opacity","_ref$width","width","_ref$height","height","_ref$blur","blur","_ref$far","far","_ref$resolution","resolution","props","_useThree","scene","gl","shadowCamera","_useMemo","renderTarget","renderTargetBlur","texture","generateMipmaps","planeGeometry","rotateX","Math","PI","blurPlane","depthMaterial","depthTest","depthWrite","onBeforeCompile","shader","fragmentShader","replace","horizontalBlurMaterial","verticalBlurMaterial","_useMemo2","_slicedToArray","current","initialBackground","background","overrideMaterial","setRenderTarget","render","material","uniforms","tDiffuse","value","h","v","geometry","scale","rotation","map","transparent","args"],"sources":["/Users/Aaron/Desktop/mirrorsReactThreeFiber/node_modules/@react-three/drei/ContactShadows.js"],"sourcesContent":["import _extends from '@babel/runtime/helpers/esm/extends';\nimport _objectWithoutPropertiesLoose from '@babel/runtime/helpers/esm/objectWithoutPropertiesLoose';\nimport { forwardRef, useRef, useMemo, createElement } from 'react';\nimport { useThree, useFrame } from 'react-three-fiber';\nimport { WebGLRenderTarget, PlaneBufferGeometry, Mesh, MeshDepthMaterial, ShaderMaterial } from 'three';\nimport { HorizontalBlurShader } from 'three/examples/jsm/shaders/HorizontalBlurShader';\nimport { VerticalBlurShader } from 'three/examples/jsm/shaders/VerticalBlurShader';\n\nconst ContactShadows = /*#__PURE__*/forwardRef((_ref, ref) => {\n  let {\n    opacity = 1,\n    width = 1,\n    height = 1,\n    blur = 1,\n    far = 10,\n    resolution = 256\n  } = _ref,\n      props = _objectWithoutPropertiesLoose(_ref, [\"opacity\", \"width\", \"height\", \"blur\", \"far\", \"resolution\"]);\n\n  const {\n    scene,\n    gl\n  } = useThree();\n  const shadowCamera = useRef();\n  const [renderTarget, planeGeometry, depthMaterial, blurPlane, horizontalBlurMaterial, verticalBlurMaterial, renderTargetBlur] = useMemo(() => {\n    const renderTarget = new WebGLRenderTarget(resolution, resolution);\n    const renderTargetBlur = new WebGLRenderTarget(resolution, resolution);\n    renderTargetBlur.texture.generateMipmaps = renderTarget.texture.generateMipmaps = false;\n    const planeGeometry = new PlaneBufferGeometry(width, height).rotateX(Math.PI / 2);\n    const blurPlane = new Mesh(planeGeometry);\n    const depthMaterial = new MeshDepthMaterial();\n    depthMaterial.depthTest = depthMaterial.depthWrite = false;\n\n    depthMaterial.onBeforeCompile = shader => shader.fragmentShader = shader.fragmentShader.replace('1.0 - fragCoordZ ), opacity );', '0.0 ), ( 1.0 - fragCoordZ ) * 1.0 );');\n\n    const horizontalBlurMaterial = new ShaderMaterial(HorizontalBlurShader);\n    const verticalBlurMaterial = new ShaderMaterial(VerticalBlurShader);\n    verticalBlurMaterial.depthTest = horizontalBlurMaterial.depthTest = false;\n    return [renderTarget, planeGeometry, depthMaterial, blurPlane, horizontalBlurMaterial, verticalBlurMaterial, renderTargetBlur];\n  }, [resolution, width, height]);\n  useFrame(() => {\n    if (shadowCamera.current) {\n      const initialBackground = scene.background;\n      scene.background = null;\n      scene.overrideMaterial = depthMaterial;\n      gl.setRenderTarget(renderTarget);\n      gl.render(scene, shadowCamera.current);\n      scene.overrideMaterial = null;\n      blurPlane.material = horizontalBlurMaterial;\n      blurPlane.material.uniforms.tDiffuse.value = renderTarget.texture;\n      horizontalBlurMaterial.uniforms.h.value = blur / 256;\n      gl.setRenderTarget(renderTargetBlur);\n      gl.render(blurPlane, shadowCamera.current);\n      blurPlane.material = verticalBlurMaterial;\n      blurPlane.material.uniforms.tDiffuse.value = renderTargetBlur.texture;\n      verticalBlurMaterial.uniforms.v.value = blur / 256;\n      gl.setRenderTarget(renderTarget);\n      gl.render(blurPlane, shadowCamera.current);\n      gl.setRenderTarget(null);\n      scene.background = initialBackground;\n    }\n  });\n  return /*#__PURE__*/createElement(\"group\", _extends({}, props, {\n    ref: ref\n  }), /*#__PURE__*/createElement(\"mesh\", {\n    geometry: planeGeometry,\n    scale: [1, -1, 1],\n    rotation: [-Math.PI / 2, 0, 0]\n  }, /*#__PURE__*/createElement(\"meshBasicMaterial\", {\n    map: renderTarget.texture,\n    transparent: true,\n    opacity: opacity\n  })), /*#__PURE__*/createElement(\"orthographicCamera\", {\n    ref: shadowCamera,\n    args: [-width / 2, width / 2, height / 2, -height / 2, 0, far]\n  }));\n});\n\nexport { ContactShadows };\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}