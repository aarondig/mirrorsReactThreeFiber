{"ast":null,"code":"import { Euler, EventDispatcher, MathUtils, Quaternion, Vector3 } from \"../../../build/three.module.js\";\n\n/**\n * W3C Device Orientation control (http://w3c.github.io/deviceorientation/spec-source-orientation.html)\n */\n\nvar DeviceOrientationControls = function DeviceOrientationControls(object) {\n  var scope = this;\n  var changeEvent = {\n    type: \"change\"\n  };\n  var EPS = 0.000001;\n  this.object = object;\n  this.object.rotation.reorder('YXZ');\n  this.enabled = true;\n  this.deviceOrientation = {};\n  this.screenOrientation = 0;\n  this.alphaOffset = 0; // radians\n\n  var onDeviceOrientationChangeEvent = function onDeviceOrientationChangeEvent(event) {\n    scope.deviceOrientation = event;\n  };\n  var onScreenOrientationChangeEvent = function onScreenOrientationChangeEvent() {\n    scope.screenOrientation = window.orientation || 0;\n  };\n\n  // The angles alpha, beta and gamma form a set of intrinsic Tait-Bryan angles of type Z-X'-Y''\n\n  var setObjectQuaternion = function () {\n    var zee = new Vector3(0, 0, 1);\n    var euler = new Euler();\n    var q0 = new Quaternion();\n    var q1 = new Quaternion(-Math.sqrt(0.5), 0, 0, Math.sqrt(0.5)); // - PI/2 around the x-axis\n\n    return function (quaternion, alpha, beta, gamma, orient) {\n      euler.set(beta, alpha, -gamma, 'YXZ'); // 'ZXY' for the device, but 'YXZ' for us\n\n      quaternion.setFromEuler(euler); // orient the device\n\n      quaternion.multiply(q1); // camera looks out the back of the device, not the top\n\n      quaternion.multiply(q0.setFromAxisAngle(zee, -orient)); // adjust for screen orientation\n    };\n  }();\n\n  this.connect = function () {\n    onScreenOrientationChangeEvent(); // run once on load\n\n    // iOS 13+\n\n    if (window.DeviceOrientationEvent !== undefined && typeof window.DeviceOrientationEvent.requestPermission === 'function') {\n      window.DeviceOrientationEvent.requestPermission().then(function (response) {\n        if (response == 'granted') {\n          window.addEventListener('orientationchange', onScreenOrientationChangeEvent, false);\n          window.addEventListener('deviceorientation', onDeviceOrientationChangeEvent, false);\n        }\n      }).catch(function (error) {\n        console.error('THREE.DeviceOrientationControls: Unable to use DeviceOrientation API:', error);\n      });\n    } else {\n      window.addEventListener('orientationchange', onScreenOrientationChangeEvent, false);\n      window.addEventListener('deviceorientation', onDeviceOrientationChangeEvent, false);\n    }\n    scope.enabled = true;\n  };\n  this.disconnect = function () {\n    window.removeEventListener('orientationchange', onScreenOrientationChangeEvent, false);\n    window.removeEventListener('deviceorientation', onDeviceOrientationChangeEvent, false);\n    scope.enabled = false;\n  };\n  this.update = function () {\n    var lastQuaternion = new Quaternion();\n    return function () {\n      if (scope.enabled === false) return;\n      var device = scope.deviceOrientation;\n      if (device) {\n        var alpha = device.alpha ? MathUtils.degToRad(device.alpha) + scope.alphaOffset : 0; // Z\n\n        var beta = device.beta ? MathUtils.degToRad(device.beta) : 0; // X'\n\n        var gamma = device.gamma ? MathUtils.degToRad(device.gamma) : 0; // Y''\n\n        var orient = scope.screenOrientation ? MathUtils.degToRad(scope.screenOrientation) : 0; // O\n\n        setObjectQuaternion(scope.object.quaternion, alpha, beta, gamma, orient);\n        if (8 * (1 - lastQuaternion.dot(scope.object.quaternion)) > EPS) {\n          lastQuaternion.copy(scope.object.quaternion);\n          scope.dispatchEvent(changeEvent);\n        }\n      }\n    };\n  }();\n  this.dispose = function () {\n    scope.disconnect();\n  };\n  this.connect();\n};\nDeviceOrientationControls.prototype = Object.create(EventDispatcher.prototype);\nDeviceOrientationControls.prototype.constructor = DeviceOrientationControls;\nexport { DeviceOrientationControls };","map":{"version":3,"names":["Euler","EventDispatcher","MathUtils","Quaternion","Vector3","DeviceOrientationControls","object","scope","changeEvent","type","EPS","rotation","reorder","enabled","deviceOrientation","screenOrientation","alphaOffset","onDeviceOrientationChangeEvent","event","onScreenOrientationChangeEvent","window","orientation","setObjectQuaternion","zee","euler","q0","q1","Math","sqrt","quaternion","alpha","beta","gamma","orient","set","setFromEuler","multiply","setFromAxisAngle","connect","DeviceOrientationEvent","undefined","requestPermission","then","response","addEventListener","catch","error","console","disconnect","removeEventListener","update","lastQuaternion","device","degToRad","dot","copy","dispatchEvent","dispose","prototype","Object","create","constructor"],"sources":["/Users/Aaron/Desktop/mirrorsReactThreeFiber/node_modules/three/examples/jsm/controls/DeviceOrientationControls.js"],"sourcesContent":["import {\n\tEuler,\n\tEventDispatcher,\n\tMathUtils,\n\tQuaternion,\n\tVector3\n} from \"../../../build/three.module.js\";\n\n/**\n * W3C Device Orientation control (http://w3c.github.io/deviceorientation/spec-source-orientation.html)\n */\n\nvar DeviceOrientationControls = function ( object ) {\n\n\tvar scope = this;\n\tvar changeEvent = { type: \"change\" };\n\tvar EPS = 0.000001;\n\n\tthis.object = object;\n\tthis.object.rotation.reorder( 'YXZ' );\n\n\tthis.enabled = true;\n\n\tthis.deviceOrientation = {};\n\tthis.screenOrientation = 0;\n\n\tthis.alphaOffset = 0; // radians\n\n\tvar onDeviceOrientationChangeEvent = function ( event ) {\n\n\t\tscope.deviceOrientation = event;\n\n\t};\n\n\tvar onScreenOrientationChangeEvent = function () {\n\n\t\tscope.screenOrientation = window.orientation || 0;\n\n\t};\n\n\t// The angles alpha, beta and gamma form a set of intrinsic Tait-Bryan angles of type Z-X'-Y''\n\n\tvar setObjectQuaternion = function () {\n\n\t\tvar zee = new Vector3( 0, 0, 1 );\n\n\t\tvar euler = new Euler();\n\n\t\tvar q0 = new Quaternion();\n\n\t\tvar q1 = new Quaternion( - Math.sqrt( 0.5 ), 0, 0, Math.sqrt( 0.5 ) ); // - PI/2 around the x-axis\n\n\t\treturn function ( quaternion, alpha, beta, gamma, orient ) {\n\n\t\t\teuler.set( beta, alpha, - gamma, 'YXZ' ); // 'ZXY' for the device, but 'YXZ' for us\n\n\t\t\tquaternion.setFromEuler( euler ); // orient the device\n\n\t\t\tquaternion.multiply( q1 ); // camera looks out the back of the device, not the top\n\n\t\t\tquaternion.multiply( q0.setFromAxisAngle( zee, - orient ) ); // adjust for screen orientation\n\n\t\t};\n\n\t}();\n\n\tthis.connect = function () {\n\n\t\tonScreenOrientationChangeEvent(); // run once on load\n\n\t\t// iOS 13+\n\n\t\tif ( window.DeviceOrientationEvent !== undefined && typeof window.DeviceOrientationEvent.requestPermission === 'function' ) {\n\n\t\t\twindow.DeviceOrientationEvent.requestPermission().then( function ( response ) {\n\n\t\t\t\tif ( response == 'granted' ) {\n\n\t\t\t\t\twindow.addEventListener( 'orientationchange', onScreenOrientationChangeEvent, false );\n\t\t\t\t\twindow.addEventListener( 'deviceorientation', onDeviceOrientationChangeEvent, false );\n\n\t\t\t\t}\n\n\t\t\t} ).catch( function ( error ) {\n\n\t\t\t\tconsole.error( 'THREE.DeviceOrientationControls: Unable to use DeviceOrientation API:', error );\n\n\t\t\t} );\n\n\t\t} else {\n\n\t\t\twindow.addEventListener( 'orientationchange', onScreenOrientationChangeEvent, false );\n\t\t\twindow.addEventListener( 'deviceorientation', onDeviceOrientationChangeEvent, false );\n\n\t\t}\n\n\t\tscope.enabled = true;\n\n\t};\n\n\tthis.disconnect = function () {\n\n\t\twindow.removeEventListener( 'orientationchange', onScreenOrientationChangeEvent, false );\n\t\twindow.removeEventListener( 'deviceorientation', onDeviceOrientationChangeEvent, false );\n\n\t\tscope.enabled = false;\n\n\t};\n\n\tthis.update = ( function () {\n\n\t\tvar lastQuaternion = new Quaternion();\n\n\t\treturn function () {\n\n\t\t\tif ( scope.enabled === false ) return;\n\n\t\t\tvar device = scope.deviceOrientation;\n\n\t\t\tif ( device ) {\n\n\t\t\t\tvar alpha = device.alpha ? MathUtils.degToRad( device.alpha ) + scope.alphaOffset : 0; // Z\n\n\t\t\t\tvar beta = device.beta ? MathUtils.degToRad( device.beta ) : 0; // X'\n\n\t\t\t\tvar gamma = device.gamma ? MathUtils.degToRad( device.gamma ) : 0; // Y''\n\n\t\t\t\tvar orient = scope.screenOrientation ? MathUtils.degToRad( scope.screenOrientation ) : 0; // O\n\n\t\t\t\tsetObjectQuaternion( scope.object.quaternion, alpha, beta, gamma, orient );\n\n\t\t\t\tif ( 8 * ( 1 - lastQuaternion.dot( scope.object.quaternion ) ) > EPS ) {\n\n\t\t\t\t\tlastQuaternion.copy( scope.object.quaternion );\n\t\t\t\t\tscope.dispatchEvent( changeEvent );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t};\n\n\n\t} )();\n\n\tthis.dispose = function () {\n\n\t\tscope.disconnect();\n\n\t};\n\n\tthis.connect();\n\n};\n\nDeviceOrientationControls.prototype = Object.create( EventDispatcher.prototype );\nDeviceOrientationControls.prototype.constructor = DeviceOrientationControls;\n\nexport { DeviceOrientationControls };\n"],"mappings":"AAAA,SACCA,KAAK,EACLC,eAAe,EACfC,SAAS,EACTC,UAAU,EACVC,OAAO,QACD,gCAAgC;;AAEvC;AACA;AACA;;AAEA,IAAIC,yBAAyB,GAAG,SAA5BA,yBAAyBA,CAAcC,MAAM,EAAG;EAEnD,IAAIC,KAAK,GAAG,IAAI;EAChB,IAAIC,WAAW,GAAG;IAAEC,IAAI,EAAE;EAAS,CAAC;EACpC,IAAIC,GAAG,GAAG,QAAQ;EAElB,IAAI,CAACJ,MAAM,GAAGA,MAAM;EACpB,IAAI,CAACA,MAAM,CAACK,QAAQ,CAACC,OAAO,CAAE,KAAM,CAAC;EAErC,IAAI,CAACC,OAAO,GAAG,IAAI;EAEnB,IAAI,CAACC,iBAAiB,GAAG,CAAC,CAAC;EAC3B,IAAI,CAACC,iBAAiB,GAAG,CAAC;EAE1B,IAAI,CAACC,WAAW,GAAG,CAAC,CAAC,CAAC;;EAEtB,IAAIC,8BAA8B,GAAG,SAAjCA,8BAA8BA,CAAcC,KAAK,EAAG;IAEvDX,KAAK,CAACO,iBAAiB,GAAGI,KAAK;EAEhC,CAAC;EAED,IAAIC,8BAA8B,GAAG,SAAjCA,8BAA8BA,CAAA,EAAe;IAEhDZ,KAAK,CAACQ,iBAAiB,GAAGK,MAAM,CAACC,WAAW,IAAI,CAAC;EAElD,CAAC;;EAED;;EAEA,IAAIC,mBAAmB,GAAG,YAAY;IAErC,IAAIC,GAAG,GAAG,IAAInB,OAAO,CAAE,CAAC,EAAE,CAAC,EAAE,CAAE,CAAC;IAEhC,IAAIoB,KAAK,GAAG,IAAIxB,KAAK,CAAC,CAAC;IAEvB,IAAIyB,EAAE,GAAG,IAAItB,UAAU,CAAC,CAAC;IAEzB,IAAIuB,EAAE,GAAG,IAAIvB,UAAU,CAAE,CAAEwB,IAAI,CAACC,IAAI,CAAE,GAAI,CAAC,EAAE,CAAC,EAAE,CAAC,EAAED,IAAI,CAACC,IAAI,CAAE,GAAI,CAAE,CAAC,CAAC,CAAC;;IAEvE,OAAO,UAAWC,UAAU,EAAEC,KAAK,EAAEC,IAAI,EAAEC,KAAK,EAAEC,MAAM,EAAG;MAE1DT,KAAK,CAACU,GAAG,CAAEH,IAAI,EAAED,KAAK,EAAE,CAAEE,KAAK,EAAE,KAAM,CAAC,CAAC,CAAC;;MAE1CH,UAAU,CAACM,YAAY,CAAEX,KAAM,CAAC,CAAC,CAAC;;MAElCK,UAAU,CAACO,QAAQ,CAAEV,EAAG,CAAC,CAAC,CAAC;;MAE3BG,UAAU,CAACO,QAAQ,CAAEX,EAAE,CAACY,gBAAgB,CAAEd,GAAG,EAAE,CAAEU,MAAO,CAAE,CAAC,CAAC,CAAC;IAE9D,CAAC;EAEF,CAAC,CAAC,CAAC;;EAEH,IAAI,CAACK,OAAO,GAAG,YAAY;IAE1BnB,8BAA8B,CAAC,CAAC,CAAC,CAAC;;IAElC;;IAEA,IAAKC,MAAM,CAACmB,sBAAsB,KAAKC,SAAS,IAAI,OAAOpB,MAAM,CAACmB,sBAAsB,CAACE,iBAAiB,KAAK,UAAU,EAAG;MAE3HrB,MAAM,CAACmB,sBAAsB,CAACE,iBAAiB,CAAC,CAAC,CAACC,IAAI,CAAE,UAAWC,QAAQ,EAAG;QAE7E,IAAKA,QAAQ,IAAI,SAAS,EAAG;UAE5BvB,MAAM,CAACwB,gBAAgB,CAAE,mBAAmB,EAAEzB,8BAA8B,EAAE,KAAM,CAAC;UACrFC,MAAM,CAACwB,gBAAgB,CAAE,mBAAmB,EAAE3B,8BAA8B,EAAE,KAAM,CAAC;QAEtF;MAED,CAAE,CAAC,CAAC4B,KAAK,CAAE,UAAWC,KAAK,EAAG;QAE7BC,OAAO,CAACD,KAAK,CAAE,uEAAuE,EAAEA,KAAM,CAAC;MAEhG,CAAE,CAAC;IAEJ,CAAC,MAAM;MAEN1B,MAAM,CAACwB,gBAAgB,CAAE,mBAAmB,EAAEzB,8BAA8B,EAAE,KAAM,CAAC;MACrFC,MAAM,CAACwB,gBAAgB,CAAE,mBAAmB,EAAE3B,8BAA8B,EAAE,KAAM,CAAC;IAEtF;IAEAV,KAAK,CAACM,OAAO,GAAG,IAAI;EAErB,CAAC;EAED,IAAI,CAACmC,UAAU,GAAG,YAAY;IAE7B5B,MAAM,CAAC6B,mBAAmB,CAAE,mBAAmB,EAAE9B,8BAA8B,EAAE,KAAM,CAAC;IACxFC,MAAM,CAAC6B,mBAAmB,CAAE,mBAAmB,EAAEhC,8BAA8B,EAAE,KAAM,CAAC;IAExFV,KAAK,CAACM,OAAO,GAAG,KAAK;EAEtB,CAAC;EAED,IAAI,CAACqC,MAAM,GAAK,YAAY;IAE3B,IAAIC,cAAc,GAAG,IAAIhD,UAAU,CAAC,CAAC;IAErC,OAAO,YAAY;MAElB,IAAKI,KAAK,CAACM,OAAO,KAAK,KAAK,EAAG;MAE/B,IAAIuC,MAAM,GAAG7C,KAAK,CAACO,iBAAiB;MAEpC,IAAKsC,MAAM,EAAG;QAEb,IAAItB,KAAK,GAAGsB,MAAM,CAACtB,KAAK,GAAG5B,SAAS,CAACmD,QAAQ,CAAED,MAAM,CAACtB,KAAM,CAAC,GAAGvB,KAAK,CAACS,WAAW,GAAG,CAAC,CAAC,CAAC;;QAEvF,IAAIe,IAAI,GAAGqB,MAAM,CAACrB,IAAI,GAAG7B,SAAS,CAACmD,QAAQ,CAAED,MAAM,CAACrB,IAAK,CAAC,GAAG,CAAC,CAAC,CAAC;;QAEhE,IAAIC,KAAK,GAAGoB,MAAM,CAACpB,KAAK,GAAG9B,SAAS,CAACmD,QAAQ,CAAED,MAAM,CAACpB,KAAM,CAAC,GAAG,CAAC,CAAC,CAAC;;QAEnE,IAAIC,MAAM,GAAG1B,KAAK,CAACQ,iBAAiB,GAAGb,SAAS,CAACmD,QAAQ,CAAE9C,KAAK,CAACQ,iBAAkB,CAAC,GAAG,CAAC,CAAC,CAAC;;QAE1FO,mBAAmB,CAAEf,KAAK,CAACD,MAAM,CAACuB,UAAU,EAAEC,KAAK,EAAEC,IAAI,EAAEC,KAAK,EAAEC,MAAO,CAAC;QAE1E,IAAK,CAAC,IAAK,CAAC,GAAGkB,cAAc,CAACG,GAAG,CAAE/C,KAAK,CAACD,MAAM,CAACuB,UAAW,CAAC,CAAE,GAAGnB,GAAG,EAAG;UAEtEyC,cAAc,CAACI,IAAI,CAAEhD,KAAK,CAACD,MAAM,CAACuB,UAAW,CAAC;UAC9CtB,KAAK,CAACiD,aAAa,CAAEhD,WAAY,CAAC;QAEnC;MAED;IAED,CAAC;EAGF,CAAC,CAAG,CAAC;EAEL,IAAI,CAACiD,OAAO,GAAG,YAAY;IAE1BlD,KAAK,CAACyC,UAAU,CAAC,CAAC;EAEnB,CAAC;EAED,IAAI,CAACV,OAAO,CAAC,CAAC;AAEf,CAAC;AAEDjC,yBAAyB,CAACqD,SAAS,GAAGC,MAAM,CAACC,MAAM,CAAE3D,eAAe,CAACyD,SAAU,CAAC;AAChFrD,yBAAyB,CAACqD,SAAS,CAACG,WAAW,GAAGxD,yBAAyB;AAE3E,SAASA,yBAAyB"},"metadata":{},"sourceType":"module"}